–û–∫, –¥–∞–≤–∞–π ¬´–ø—Ä–∏—á–µ—Å—ã–≤–∞—Ç—å¬ª –ø—Ä–æ–µ–∫—Ç: —Ä–∞–∑–±–∏—Ç—å –∫–æ–¥, –¥–∞—Ç—å —Ä—É—Å—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã ‚âà –¥–æ 300 —Å—Ç—Ä–æ–∫ –∏ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë –ª–æ–≥–∏—á–Ω–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ. –ù–∏–∂–µ ‚Äî —á—ë—Ç–∫–∏–π –ø–ª–∞–Ω + –ø—Ä–∞–≤–∏–ª–∞.

---

## 1. –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

* **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω—É –ø–æ–Ω—è—Ç–Ω—É—é —Ä–æ–ª—å.
* **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏/—Ñ–∏—Ä–º—ã/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
* **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** —Ä—É—Å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ¬´—á—Ç–æ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç¬ª, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
* **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–ª–∏–Ω—ã:** \~300 —Å—Ç—Ä–æ–∫/—Ñ–∞–π–ª (–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –¥–ª—è —Å—Ö–µ–º/—Ç–∏–ø–æ–≤).

---

## 2. –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞

### 2.1 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Ñ–∞–π–ª–∞

* ESLint rule:

  ```json
  "max-lines": ["error", { "max": 300, "skipBlankLines": true, "skipComments": true }],
  "max-lines-per-function": ["error", 80]
  ```
* –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª ‚Üí –¥–µ–ª–∏–º –ø–æ —Å–ª–æ—è–º (types, ui, logic, utils).

### 2.2 –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)

* –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ ‚Äî –±–ª–æ–∫-—à–∞–ø–∫–∞:

  ```ts
  /**
   * –§–∞–π–ª: src/features/projects/api/createProject.ts
   * –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: API-–∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: ProjectForm.tsx
   * –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: axiosInstance, types/Project.ts
   */
  ```
* –î–ª—è —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤ ‚Äî JSDoc:

  ```ts
  /**
   * –°–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–µ–∫—Ç –≤ –ë–î.
   * @param payload –î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   * @returns –°–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
   */
  ```
* –î–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (3‚Äì6 —Å—Ç—Ä–æ–∫).

### 2.3 –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

* –§–∏—á–∏ ‚Äî **feature-first**, –Ω–µ ¬´layer-first¬ª.
* –¢–∏–ø—ã/—Å—Ö–µ–º—ã ‚Äî —Ä—è–¥–æ–º —Å —Ñ–∏—á–µ–π (`types.ts` / `schema.ts`).
* –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã ‚Äî –≤ `shared/`.

---

## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (React)

```
src/
  app/                  # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Ä–æ—É—Ç–∏–Ω–≥
    providers/
    router/
    index.tsx
  shared/               # –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ö—É–∫–∏, utils
    ui/
    hooks/
    lib/
    types/
  features/
    auth/
      api/
      hooks/
      components/
      types.ts
      index.ts
    firms/
      api/
      components/
      pages/
      types.ts
    projects/
      api/
      components/
        ProjectForm/
          ProjectForm.tsx
          ProjectForm.schema.ts
          ProjectForm.styles.ts
        ProjectTable/
      hooks/
      types.ts
      pages/
        ProjectsPage.tsx
        ProjectDetailPage.tsx
      utils/
    crews/
    invoices/
    files/
    calendar/
```

**–ü—Ä–∞–≤–∏–ª–∞:**

* `pages/` ‚Äî —Ñ–∞–π–ª—ã-—Å—Ç—Ä–∞–Ω–∏—Ü—ã (–º–∞—Ä—à—Ä—É—Ç—ã).
* `components/` ‚Äî UI-–∫—É—Å–æ—á–∫–∏ (–¥–æ 200 —Å—Ç—Ä–æ–∫).
* `api/` ‚Äî –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª = –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å (React Query hook —Ä—è–¥–æ–º: `useCreateProject.ts`).
* `hooks/` ‚Äî –±–∏–∑–Ω–µ—Å-—Ö—É–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `useProjectStatus`).
* `utils/` ‚Äî —Ä–∞—Å—á—ë—Ç—ã, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã.
* `types.ts` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ–∏—á–∏.

---

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–µ–Ω–¥–∞ (Node/Express)

```
src/
  server.ts
  config/               # env, logger, mail, postmark
  modules/
    auth/
      auth.controller.ts
      auth.service.ts
      auth.routes.ts
      auth.types.ts
    firms/
      firms.controller.ts
      firms.service.ts
      firms.repository.ts
      firms.routes.ts
      firms.schema.ts
    projects/
      projects.controller.ts
      projects.service.ts
      projects.repository.ts
      projects.routes.ts
      projects.schema.ts
      history/
        history.service.ts
        history.schema.ts
    invoices/
      invoices.controller.ts
      invoices.service.ts  # –≤—ã–∑—ã–≤–∞–µ—Ç Invoice Ninja / Postmark
      ...
    calendar/
      calendar.service.ts  # Google API
    files/
      files.controller.ts
      files.service.ts
  db/
    drizzle/
      migrations/
      schema.ts
    index.ts
  shared/
    errors/
    utils/
    middlewares/
    types/
```

**–°–ª–æ–∏:**

* **controller** ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç input (Zod), –æ—Ç–≤–µ—á–∞–µ—Ç.
* **service** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, orchestration.
* **repository** ‚Äî –¥–æ—Å—Ç—É–ø –∫ –ë–î (Drizzle ORM).
* **schema.ts** ‚Äî Zod/Drizzle-—Å—Ö–µ–º—ã.
* **routes.ts** ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø—É—Ç–∏ —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏.

---

## 5. –ö–∞–∫ —Ä–µ–∑–∞—Ç—å –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã

### –ü—Ä–∏–º–µ—Ä: `ProjectDetail.tsx` (700 —Å—Ç—Ä–æ–∫)

* –í—ã–Ω–µ—Å—Ç–∏:

  * —Ñ–æ—Ä–º—ã ‚Üí `components/ProjectForm/‚Ä¶`
  * —Ç–∞–±–ª–∏—Ü—É —É—Å–ª—É–≥ ‚Üí `components/ServicesTable/‚Ä¶`
  * —Ö—É–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚Üí `hooks/useProjectData.ts`
  * —É—Ç–∏–ª–∏—Ç—ã ‚Üí `utils/calcTotal.ts`
  * —Ç–∏–ø—ã ‚Üí `types.ts`
* –û—Å—Ç–∞–≤–∏—Ç—å –≤ `ProjectDetailPage.tsx` —Ç–æ–ª—å–∫–æ layout + –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –ü—Ä–∏–º–µ—Ä: `invoice.service.ts` (500 —Å—Ç—Ä–æ–∫)

* –†–∞–∑–±–∏—Ç—å –Ω–∞:

  * `invoice.service.ts` ‚Äî high-level –º–µ—Ç–æ–¥—ã (`createInvoice`, `markPaid`)
  * `invoice.ninja.ts` ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Invoice Ninja
  * `invoice.mapper.ts` ‚Äî —Å–±–æ—Ä–∫–∞ payload (line\_items –∏ —Ç.–ø.)
  * `invoice.history.ts` ‚Äî –∑–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏

---

## 6. –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

* **TypeDoc** –¥–ª—è TS:

  ```bash
  npx typedoc --out docs src
  ```
* –•—Ä–∞–Ω–∏—Ç—å `docs/` –≤ —Ä–µ–ø–æ –∏–ª–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞ GitHub Pages.
* –í README –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏: –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ö–µ–º—ã, endpoints.

---

## 7. –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

* **ESLint + Prettier** (–ø—Ä–∞–≤–∏–ª–∞ max-lines, hooks, imports).
* **Husky + lint-staged**: –ª–∏–Ω—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º.
* **Vitest/Jest** –¥–ª—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
* **CI**: –∑–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–∞ –∏ —Ç–µ—Å—Ç–æ–≤ –≤ GitHub Actions.

---

## 8. –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–í–∫–ª—é—á–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä (max-lines)** ‚Äî —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—à—å ¬´–∫—Ä–∞—Å–Ω—ã–µ¬ª —Ñ–∞–π–ª—ã.
2. **–í—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É —Ñ–∏—á—É (Projects)** –∏ —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –ø–æ —à–∞–±–ª–æ–Ω—É.
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:** –¥–æ–±–∞–≤–ª—è—Ç—å JSDoc, —à–∞–ø–∫–∏-—Ñ–∞–π–ª–æ–≤.
4. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥ –≤ `shared/`.**
5. **–û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tsconfig-paths).
6. **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è Invoices, Firms, Crews, Files, Calendar‚Ä¶**
7. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å TypeDoc –∏ README –¥–ª—è –º–æ–¥—É–ª–µ–π.**

---

## 9. –®–∞–±–ª–æ–Ω—ã/–±–æ–ª–≤–∞–Ω–∫–∏

### –®–∞–ø–∫–∞ —Ñ–∞–π–ª–∞

```ts
/**
 * –§–∞–π–ª: src/modules/invoices/invoice.service.ts
 * –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—á–µ—Ç–æ–≤.
 * –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: Invoice Ninja API, Postmark API
 * –ê–≤—Ç–æ—Ä: (–∏–º—è/–ò–ò)
 * –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: 2025-07-24
 */
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –±–ª–æ–∫—É –∫–æ–¥–∞

```ts
// ----- 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Invoice Ninja -----
// –°–æ–±–∏—Ä–∞–µ–º line_items –∏–∑ —É—Å–ª—É–≥ –ø—Ä–æ–µ–∫—Ç–∞, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º custom_valueX
```

---

## 10. –ö—É–¥–∞ –ø–∏—Å–∞—Ç—å —Ä—É—Å—Å–∫—É—é ¬´–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é¬ª

* **README.md –≤ –∫–∞–∂–¥–æ–π —Ñ–∏—á–µ** (–∫—Ä–∞—Ç–∫–æ: —á—Ç–æ –¥–µ–ª–∞–µ—Ç, –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã).
* **–®–∞–ø–∫–∏ —Ñ–∞–π–ª–æ–≤ + JSDoc** (—Å–º. –≤—ã—à–µ).
* **docs/ARCHITECTURE.md** ‚Äî –æ–±—â–∞—è —Å—Ö–µ–º–∞.
* **docs/API.md** ‚Äî —Å–ø–∏—Å–æ–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (—Ä—É—Å—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ).

---

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É:

* –ü—Ä–∏—Å–ª–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ ESLint/Prettier –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ–¥ —Ç–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞.
* –†–∞–∑–±–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª, –µ—Å–ª–∏ –¥–∞—à—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.
* –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã README –¥–ª—è –º–æ–¥—É–ª–µ–π.

–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π, —Å –∫–∞–∫–æ–π —á–∞—Å—Ç–∏ –Ω–∞—á–Ω—ë–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´Projects —Ñ—Ä–æ–Ω—Ç¬ª –∏–ª–∏ ¬´Invoices –±—ç–∫¬ª), –∏ –ø–æ–π–¥—ë–º –ø–æ —à–∞–≥–∞–º. üí™
